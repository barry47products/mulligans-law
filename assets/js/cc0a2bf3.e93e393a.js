"use strict";(globalThis.webpackChunkdocs_technical=globalThis.webpackChunkdocs_technical||[]).push([[909],{6296:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"features/authentication","title":"Authentication","description":"The authentication system provides complete user management with email/password authentication, powered by Supabase.","source":"@site/docs/features/authentication.md","sourceDirName":"features","slug":"/features/authentication","permalink":"/mulligans-law/docs/features/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/barry47products/mulligans-law/tree/main/docs-technical/docs/features/authentication.md","tags":[],"version":"current","frontMatter":{}}');var t=s(4848),a=s(8453);const r={},l="Authentication",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Domain Layer",id:"domain-layer",level:3},{value:"Entities",id:"entities",level:4},{value:"Repository Interface",id:"repository-interface",level:4},{value:"Use Cases",id:"use-cases",level:4},{value:"Data Layer",id:"data-layer",level:3},{value:"Repository Implementation",id:"repository-implementation",level:4},{value:"Presentation Layer",id:"presentation-layer",level:3},{value:"BLoC State Management",id:"bloc-state-management",level:4},{value:"UI Screens",id:"ui-screens",level:4},{value:"Configuration",id:"configuration",level:2},{value:"Supabase Setup",id:"supabase-setup",level:3},{value:"App Integration",id:"app-integration",level:3},{value:"Auth Gate",id:"auth-gate",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Sign In",id:"sign-in",level:3},{value:"Sign Up",id:"sign-up",level:3},{value:"Sign Out",id:"sign-out",level:3},{value:"Check Current User",id:"check-current-user",level:3},{value:"Testing",id:"testing",level:2},{value:"Test Coverage",id:"test-coverage",level:3},{value:"<strong>Total: 62 tests, all passing \u2705</strong>",id:"total-62-tests-all-passing-",level:4},{value:"Running Tests",id:"running-tests",level:3},{value:"Test Structure",id:"test-structure",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Row Level Security (RLS)",id:"row-level-security-rls",level:3},{value:"Token Management",id:"token-management",level:3},{value:"Password Requirements",id:"password-requirements",level:3},{value:"HTTPS Required",id:"https-required",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;Supabase instance not initialized&quot;",id:"supabase-instance-not-initialized",level:3},{value:"&quot;Invalid credentials&quot; on valid login",id:"invalid-credentials-on-valid-login",level:3},{value:"Tests failing with MissingPluginException",id:"tests-failing-with-missingpluginexception",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2},{value:"API Reference",id:"api-reference",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,t.jsx)(n.p,{children:"The authentication system provides complete user management with email/password authentication, powered by Supabase."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The authentication feature follows Clean Architecture principles with three distinct layers:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Presentation Layer (UI + BLoC)\n       \u2193\nDomain Layer (Business Logic)\n       \u2193\nData Layer (Supabase Integration)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Email/password sign up"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Email/password sign in"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Sign out"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Password reset"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Email verification"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Persistent sessions"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Automatic token refresh"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Offline-first architecture"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,t.jsx)(n.h3,{id:"domain-layer",children:"Domain Layer"}),"\n",(0,t.jsx)(n.h4,{id:"entities",children:"Entities"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AuthUser"})," - Domain representation of an authenticated user:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"class AuthUser extends Equatable {\n  final String id;\n  final String email;\n  final String? name;\n  final String? avatarUrl;\n  final DateTime createdAt;\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AuthSession"})," - Domain representation of an authentication session:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"class AuthSession extends Equatable {\n  final AuthUser user;\n  final String accessToken;\n  final String refreshToken;\n  final DateTime expiresAt;\n\n  bool get isValid => DateTime.now().isBefore(expiresAt);\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"repository-interface",children:"Repository Interface"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"abstract class AuthRepository {\n  Future<AuthSession> signInWithEmail({required String email, required String password});\n  Future<AuthSession> signUpWithEmail({required String email, required String password, String? name});\n  Future<void> signOut();\n  Future<AuthUser?> getCurrentUser();\n  Future<AuthSession?> getCurrentSession();\n  Future<void> resetPassword({required String email});\n  Future<void> updateProfile({String? name, String? avatarUrl});\n  Stream<AuthUser?> get authStateChanges;\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"use-cases",children:"Use Cases"}),"\n",(0,t.jsx)(n.p,{children:"All use cases follow the callable pattern with validation:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SignIn"})," - Validates email/password format, delegates to repository"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SignUp"})," - Validates email/password/name, enforces 6-char minimum password"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SignOut"})," - Clears session and local storage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"GetCurrentUser"})," - Returns current authenticated user or null"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"data-layer",children:"Data Layer"}),"\n",(0,t.jsx)(n.h4,{id:"repository-implementation",children:"Repository Implementation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AuthRepositoryImpl"})," integrates with Supabase:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"class AuthRepositoryImpl implements AuthRepository {\n  final SupabaseClient supabase;\n\n  @override\n  Future<AuthSession> signInWithEmail({\n    required String email,\n    required String password\n  }) async {\n    try {\n      final response = await supabase.auth.signInWithPassword(\n        email: email,\n        password: password,\n      );\n      return response.session!.toDomain();\n    } catch (e) {\n      // Error mapping to domain exceptions\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Error Handling:"})}),"\n",(0,t.jsx)(n.p,{children:"Supabase exceptions are mapped to domain exceptions:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthException"})," (400) \u2192 ",(0,t.jsx)(n.code,{children:"InvalidCredentialsException"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthException"})," (409) \u2192 ",(0,t.jsx)(n.code,{children:"EmailAlreadyExistsException"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthException"})," (422) \u2192 ",(0,t.jsx)(n.code,{children:"WeakPasswordException"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SocketException"})," \u2192 ",(0,t.jsx)(n.code,{children:"NetworkException"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"presentation-layer",children:"Presentation Layer"}),"\n",(0,t.jsx)(n.h4,{id:"bloc-state-management",children:"BLoC State Management"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AuthBloc"})," manages authentication state with 5 events and 5 states:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Events:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthCheckRequested"})," - Check auth status on app start"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthSignInRequested"})," - User requests sign in"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthSignUpRequested"})," - User requests sign up"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthSignOutRequested"})," - User requests sign out"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthUserChanged"})," - Auth state changed (from stream)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"States:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthInitial"})," - Initial state"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthLoading"})," - Operation in progress"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthAuthenticated"})," - User is signed in"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthUnauthenticated"})," - User is not signed in"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthError"})," - Operation failed with error message"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Stream Listener:"})}),"\n",(0,t.jsxs)(n.p,{children:["The BLoC subscribes to ",(0,t.jsx)(n.code,{children:"authStateChanges"})," and emits ",(0,t.jsx)(n.code,{children:"AuthUserChanged"})," events:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"_authStateSubscription = _authRepository.authStateChanges.listen((user) {\n  add(AuthUserChanged(user?.id));\n});\n"})}),"\n",(0,t.jsx)(n.h4,{id:"ui-screens",children:"UI Screens"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"WelcomeScreen"})," - Entry point with branding:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Golf course icon"}),"\n",(0,t.jsx)(n.li,{children:'"Welcome to Mulligans Law" message'}),"\n",(0,t.jsx)(n.li,{children:"Sign In and Create Account buttons"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"SignInScreen"})," - Email/password authentication:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Email input with validation"}),"\n",(0,t.jsx)(n.li,{children:"Password input with visibility toggle"}),"\n",(0,t.jsx)(n.li,{children:'"Forgot password?" link'}),"\n",(0,t.jsx)(n.li,{children:"Google sign-in placeholder"}),"\n",(0,t.jsx)(n.li,{children:"Navigate to sign up"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"SignUpScreen"})," - New user registration:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Full name input"}),"\n",(0,t.jsx)(n.li,{children:"Email input with validation"}),"\n",(0,t.jsx)(n.li,{children:"Password input (min 6 characters)"}),"\n",(0,t.jsx)(n.li,{children:"Optional handicap index (0-54)"}),"\n",(0,t.jsx)(n.li,{children:"Google sign-up placeholder"}),"\n",(0,t.jsx)(n.li,{children:"Navigate to sign in"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ForgotPasswordScreen"})," - Password reset:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Email input"}),"\n",(0,t.jsx)(n.li,{children:"Success state with confirmation"}),"\n",(0,t.jsx)(n.li,{children:"Resend option"}),"\n",(0,t.jsx)(n.li,{children:"Back to sign in"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"VerifyEmailScreen"})," - Email verification:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"6-digit code input (auto-advance)"}),"\n",(0,t.jsx)(n.li,{children:"Auto-submit when complete"}),"\n",(0,t.jsx)(n.li,{children:"Resend code option"}),"\n",(0,t.jsx)(n.li,{children:"Email parameter via route arguments"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"supabase-setup",children:"Supabase Setup"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"SupabaseConfig"})," provides environment-based configuration:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"class SupabaseConfig {\n  static const String supabaseUrl = String.fromEnvironment(\n    'SUPABASE_URL',\n    defaultValue: 'http://localhost:54321',\n  );\n\n  static const String supabaseAnonKey = String.fromEnvironment(\n    'SUPABASE_ANON_KEY',\n    defaultValue: 'eyJhbGc...', // Local dev key\n  );\n\n  static const bool enableDebugLogging = bool.fromEnvironment(\n    'SUPABASE_DEBUG',\n    defaultValue: true,\n  );\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Production Configuration:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"flutter run --dart-define=SUPABASE_URL=https://your-project.supabase.co \\\n            --dart-define=SUPABASE_ANON_KEY=your-anon-key \\\n            --dart-define=SUPABASE_DEBUG=false\n"})}),"\n",(0,t.jsx)(n.h3,{id:"app-integration",children:"App Integration"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"main.dart"})," initializes Supabase and provides AuthBloc:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"Future<void> main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n\n  // Initialize Supabase\n  await Supabase.initialize(\n    url: SupabaseConfig.supabaseUrl,\n    anonKey: SupabaseConfig.supabaseAnonKey,\n    debug: SupabaseConfig.enableDebugLogging,\n  );\n\n  runApp(const MulligansLawApp());\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Dependency Injection:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"class MulligansLawApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    // Create repository and use cases\n    final supabaseClient = Supabase.instance.client;\n    final authRepository = AuthRepositoryImpl(supabase: supabaseClient);\n    final signInUseCase = SignIn(authRepository);\n    final signUpUseCase = SignUp(authRepository);\n    final signOutUseCase = SignOut(authRepository);\n    final getCurrentUserUseCase = GetCurrentUser(authRepository);\n\n    return BlocProvider(\n      create: (context) => AuthBloc(\n        signIn: signInUseCase,\n        signUp: signUpUseCase,\n        signOut: signOutUseCase,\n        getCurrentUser: getCurrentUserUseCase,\n        authRepository: authRepository,\n      )..add(AuthCheckRequested()),\n      child: MaterialApp(...),\n    );\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"auth-gate",children:"Auth Gate"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AuthGate"})," routes based on authentication state:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"class AuthGate extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return BlocBuilder<AuthBloc, AuthState>(\n      builder: (context, state) {\n        if (state is AuthLoading || state is AuthInitial) {\n          return const Scaffold(\n            body: Center(child: CircularProgressIndicator()),\n          );\n        } else if (state is AuthAuthenticated) {\n          return const HomeScreen();\n        } else {\n          return const WelcomeScreen();\n        }\n      },\n    );\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,t.jsx)(n.h3,{id:"sign-in",children:"Sign In"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"// In your widget\ncontext.read<AuthBloc>().add(\n  AuthSignInRequested(\n    email: 'user@example.com',\n    password: 'password123',\n  ),\n);\n\n// Listen to state changes\nBlocListener<AuthBloc, AuthState>(\n  listener: (context, state) {\n    if (state is AuthAuthenticated) {\n      // Navigate to home\n      Navigator.pushReplacementNamed(context, '/home');\n    } else if (state is AuthError) {\n      // Show error\n      ScaffoldMessenger.of(context).showSnackBar(\n        SnackBar(content: Text(state.message)),\n      );\n    }\n  },\n  child: YourWidget(),\n)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"sign-up",children:"Sign Up"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"context.read<AuthBloc>().add(\n  AuthSignUpRequested(\n    email: 'newuser@example.com',\n    password: 'securepass123',\n    name: 'John Doe',\n  ),\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"sign-out",children:"Sign Out"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"context.read<AuthBloc>().add(AuthSignOutRequested());\n"})}),"\n",(0,t.jsx)(n.h3,{id:"check-current-user",children:"Check Current User"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"BlocBuilder<AuthBloc, AuthState>(\n  builder: (context, state) {\n    if (state is AuthAuthenticated) {\n      return Text('Welcome, ${state.user.name ?? state.user.email}!');\n    }\n    return const SizedBox.shrink();\n  },\n)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(n.h3,{id:"test-coverage",children:"Test Coverage"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Unit Tests (51):"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"16 AuthRepository tests"}),"\n",(0,t.jsx)(n.li,{children:"20 Use case tests"}),"\n",(0,t.jsx)(n.li,{children:"13 AuthBloc tests"}),"\n",(0,t.jsx)(n.li,{children:"2 Entity tests"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Widget Tests (11):"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Screen rendering tests"}),"\n",(0,t.jsx)(n.li,{children:"Navigation tests"}),"\n",(0,t.jsx)(n.li,{children:"Helper utility tests"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"total-62-tests-all-passing-",children:(0,t.jsx)(n.strong,{children:"Total: 62 tests, all passing \u2705"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Coverage:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Domain Layer: 95%+"}),"\n",(0,t.jsx)(n.li,{children:"Data Layer: 90%+"}),"\n",(0,t.jsx)(n.li,{children:"BLoC Layer: 85%+"}),"\n",(0,t.jsx)(n.li,{children:"Overall: 31% (UI screens not yet tested)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"running-tests",children:"Running Tests"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Run all auth tests\nflutter test test/features/auth/\n\n# Run with coverage\nflutter test --coverage\n\n# Run specific test file\nflutter test test/features/auth/presentation/bloc/auth_bloc_test.dart\n"})}),"\n",(0,t.jsx)(n.h3,{id:"test-structure",children:"Test Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"test/features/auth/\n\u251c\u2500\u2500 data/\n\u2502   \u2514\u2500\u2500 repositories/\n\u2502       \u2514\u2500\u2500 auth_repository_impl_test.dart\n\u251c\u2500\u2500 domain/\n\u2502   \u2514\u2500\u2500 usecases/\n\u2502       \u251c\u2500\u2500 sign_in_test.dart\n\u2502       \u251c\u2500\u2500 sign_up_test.dart\n\u2502       \u251c\u2500\u2500 sign_out_test.dart\n\u2502       \u2514\u2500\u2500 get_current_user_test.dart\n\u2514\u2500\u2500 presentation/\n    \u2514\u2500\u2500 bloc/\n        \u2514\u2500\u2500 auth_bloc_test.dart\n"})}),"\n",(0,t.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"row-level-security-rls",children:"Row Level Security (RLS)"}),"\n",(0,t.jsx)(n.p,{children:"Supabase enforces RLS policies on all tables. Users can only access their own data."}),"\n",(0,t.jsx)(n.h3,{id:"token-management",children:"Token Management"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Access tokens stored securely by Supabase client"}),"\n",(0,t.jsx)(n.li,{children:"Automatic token refresh before expiration"}),"\n",(0,t.jsx)(n.li,{children:"Tokens cleared on sign out"}),"\n",(0,t.jsx)(n.li,{children:"No tokens stored in plain text"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"password-requirements",children:"Password Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Minimum 6 characters"}),"\n",(0,t.jsx)(n.li,{children:"Validated client-side and server-side"}),"\n",(0,t.jsx)(n.li,{children:"Never logged or displayed"}),"\n",(0,t.jsx)(n.li,{children:"Bcrypt hashing on server"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"https-required",children:"HTTPS Required"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Production must use HTTPS"}),"\n",(0,t.jsx)(n.li,{children:"Local development uses HTTP (localhost only)"}),"\n",(0,t.jsx)(n.li,{children:"Supabase enforces HTTPS in production"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"supabase-instance-not-initialized",children:'"Supabase instance not initialized"'}),"\n",(0,t.jsxs)(n.p,{children:["Make sure Supabase is initialized before ",(0,t.jsx)(n.code,{children:"runApp()"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"await Supabase.initialize(\n  url: SupabaseConfig.supabaseUrl,\n  anonKey: SupabaseConfig.supabaseAnonKey,\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"invalid-credentials-on-valid-login",children:'"Invalid credentials" on valid login'}),"\n",(0,t.jsx)(n.p,{children:"Check that local Supabase is running:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"supabase status\n"})}),"\n",(0,t.jsx)(n.h3,{id:"tests-failing-with-missingpluginexception",children:"Tests failing with MissingPluginException"}),"\n",(0,t.jsxs)(n.p,{children:["Widget tests that use ",(0,t.jsx)(n.code,{children:"MulligansLawApp"})," need Supabase initialized. Test individual screens instead:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"await tester.pumpWidget(\n  const MaterialApp(home: WelcomeScreen()),\n);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","OAuth providers (Google, Apple)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Biometric authentication"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Multi-factor authentication (MFA)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Session management dashboard"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Password strength meter"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Remember me functionality"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Account deletion"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/mulligans-law/docs/api/auth",children:"Auth API Reference"})," for detailed class and method documentation."]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var i=s(6540);const t={},a=i.createContext(t);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);